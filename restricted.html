<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>GARDA SÍOCHÁNA — Restricted Evidence Portal • 41165-43</title>
<style>
  :root{
    --bg:#07121a; --panel:#0b1620; --accent:#b71c1c; --muted:#9fb3c9; --ink:#e6eef6; --line:rgba(255,255,255,.06);
    --tile-bg: rgba(255,255,255,.02);
  }
  html,body{height:100%;margin:0;font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,Arial;background:linear-gradient(180deg,#061018,#07121a);color:var(--ink)}
  .wrap{max-width:1200px;margin:18px auto;padding:12px}
  .banner{background:#0b0b0b;border-left:6px solid var(--accent);padding:14px 16px;font-weight:800;letter-spacing:.04em;border-radius:6px}
  .banner small{display:block;color:var(--muted);font-weight:600;margin-top:6px}
  .topbar{display:flex;align-items:center;gap:12px;margin-top:12px}
  .hamburger{display:none;background:transparent;border:1px solid rgba(255,255,255,.03);padding:8px;border-radius:6px;color:var(--ink);cursor:pointer}
  .layout{display:flex;gap:16px;margin-top:14px}
  /* SIDEBAR (desktop) */
  .sidebar{width:260px;min-width:200px;background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(255,255,255,.01));border-radius:8px;padding:12px;border:1px solid var(--line);height:calc(100vh - 180px);position:sticky;top:20px;overflow:auto;transition:transform .28s ease,box-shadow .28s}
  .sidebar.hidden{transform:translateX(-110%);box-shadow:none}
  .menu-title{font-size:13px;color:var(--muted);margin-bottom:10px}
  .nav{list-style:none;padding:0;margin:6px 0 0 0}
  .nav li{margin:6px 0}
  .nav button{width:100%;text-align:left;padding:10px 12px;border-radius:6px;border:1px solid transparent;background:transparent;color:var(--ink);cursor:pointer;font-weight:700}
  .nav button:hover{background:rgba(255,255,255,.01);border-color:var(--line)}
  .nav button.active{background:linear-gradient(90deg, rgba(183,28,28,.13), rgba(245,158,11,.04));border-left:4px solid var(--accent);padding-left:10px}
  .sidebar .meta{font-size:13px;color:var(--muted);margin-top:12px}
  .return{display:inline-block;margin-top:12px;padding:8px 10px;border-radius:6px;background:#0e2330;border:1px solid var(--line);color:var(--ink);text-decoration:none;font-size:13px}

  /* MAIN */
  .main{flex:1;background:linear-gradient(180deg,rgba(255,255,255,.01),rgba(255,255,255,.01));border-radius:8px;padding:16px;border:1px solid var(--line);min-height:400px}
  .section-title{display:flex;align-items:center;justify-content:space-between;gap:12px}
  .section-title h2{margin:0;font-size:20px}
  .grid{display:grid;grid-template-columns:repeat(auto-fill,minmax(160px,1fr));gap:14px;margin-top:14px}
  .tile{background:var(--tile-bg);border:1px solid var(--line);border-radius:8px;padding:10px;display:flex;flex-direction:column;align-items:center;min-height:170px;justify-content:flex-start}
  .tile img{width:120px;height:120px;object-fit:cover;border-radius:4px;border:1px solid rgba(0,0,0,.2)}
  .tile .title{margin-top:10px;color:#9fc3e8;text-decoration:none;font-weight:700;text-align:center;display:block;word-break:break-word}
  .tile .meta{margin-top:6px;color:var(--muted);font-size:12px;text-align:center}
  .file-icon{width:120px;height:120px;display:flex;align-items:center;justify-content:center;border-radius:6px;background:linear-gradient(180deg, rgba(255,255,255,.01), rgba(255,255,255,.02));border:1px dashed rgba(255,255,255,.03)}
  .file-icon svg{width:48px;height:48px;opacity:.9}
  .file-name{margin-top:10px;color:#9fc3e8;font-weight:700;text-decoration:none;text-align:center;display:block;word-break:break-word}
  .small{font-size:13px;color:var(--muted)}
  .empty{display:none;margin-top:10px;color:var(--muted)}

  /* Off-canvas overlay when sidebar visible on mobile */
  .overlay{display:none;position:fixed;inset:0;background:rgba(0,0,0,.45);z-index:40;opacity:0;transition:opacity .2s}
  .overlay.show{display:block;opacity:1}

  /* responsive: collapse sidebar to hamburger */
  @media (max-width:900px){
    .layout{flex-direction:column}
    .sidebar{position:fixed;left:12px;top:84px;bottom:12px;z-index:50;height:auto;width:84%;max-width:340px;transform:translateX(-110%);box-shadow:0 10px 30px rgba(0,0,0,.5)}
    .sidebar.visible{transform:translateX(0)}
    .hamburger{display:inline-block}
    .overlay{display:block}
    .topbar{margin-top:8px}
    .main{padding:12px}
    .sidebar .meta{position:sticky;bottom:12px}
    .sidebar.hidden{transform:translateX(-110%)}
    /* reduce tile size a bit for phone */
    .tile img{width:100px;height:100px}
  }
</style>
</head>
<body>
  <div class="wrap">
    <div class="banner">
      GARDA SÍOCHÁNA — EVIDENCE PORTAL
      <small>CASE FILE 41165-43 — RESTRICTED MATERIALS (INVESTIGATOR ACCESS ONLY)</small>
    </div>

    <div class="topbar">
      <button id="hamb" class="hamburger" aria-expanded="false" aria-controls="theSidebar">☰ Menu</button>
      <div style="flex:1"></div>
      <div class="small" aria-hidden="true">Case ID: <strong>41165-43</strong></div>
    </div>

    <div class="layout" role="application" aria-labelledby="pageTitle">
      <aside id="theSidebar" class="sidebar" aria-label="Sections">
        <div class="menu-title">
          <div style="font-weight:700;color:var(--muted)">SECTIONS</div>
        </div>

        <ul class="nav" id="sectionList" role="tablist">
          <li><button data-section="photos" class="active" role="tab" aria-selected="true">Crime Scene Photographs</button></li>
          <li><button data-section="recovered" role="tab">Recovered Notes</button></li>
          <li><button data-section="forensics" role="tab">Forensic Reports</button></li>
          <li><button data-section="interviews" role="tab">Interviews</button></li>
        </ul>

        <div class="meta">
          <div><strong>Case ID:</strong> 41165-43</div>
          <div style="margin-top:6px" class="small">Click a section to view files. Thumbnails open in a new tab.</div>
          <a class="return" href="index.html">Return to Open Access Portal</a>
        </div>
      </aside>

      <div id="overlay" class="overlay" tabindex="-1" aria-hidden="true"></div>

      <main class="main" id="main" tabindex="0">
        <div class="section-title">
          <h2 id="pageTitle">Crime Scene Photographs</h2>
          <div class="small" id="countInfo">Showing <span id="count">0</span> items</div>
        </div>

        <div id="grid" class="grid" aria-live="polite"></div>

        <div id="empty" class="empty">No files in this section.</div>
      </main>
    </div>
  </div>

<script>
/* same DATA structure as before — filenames must match repo exactly */
const DATA = {
  photos: [
    { file: "files/images/CS68470_BackGarden.jpeg", type: "image" },
    { file: "files/images/CS68471_Bedroom.jpeg", type: "image" },
    { file: "files/images/CS68472_BloodSplatterCarpet.jpeg", type: "image" },
    { file: "files/images/CS68473_BloodSplatterWall.jpeg", type: "image" },
    { file: "files/images/CS68474_BonfirePhoto.jpeg", type: "image" },
    { file: "files/images/CS68475_EvidenceBook.jpeg", type: "image" },
    { file: "files/images/CS68481_Table.jpeg", type: "image" },
    { file: "files/images/CS68482_Candles.jpg", type: "image" },
    { file: "files/images/CS68483_Candlestick.jpeg", type: "image" },
    { file: "files/images/CS68484_Closeupclock.jpeg", type: "image" },
    { file: "files/images/CS68485_CloseupFigures.jpeg", type: "image" },
    { file: "files/images/CS68486_wideshotFront.jpeg", type: "image" },
    { file: "files/images/CS68487_FramedPhoto.jpeg", type: "image" },
    { file: "files/images/CS68488_Bookcase.jpeg", type: "image" },
    { file: "files/images/CS68491EvidenceWallet.jpeg", type: "image" },
    { file: "files/images/CS68492_FrontDoor.jpeg", type: "image" },
    { file: "files/images/CS68493_Hearth.jpeg", type: "image" },
    { file: "files/images/CS68494_LivingRoom.jpg", type: "image" },
    { file: "files/images/CS68495_Shelf.jpeg", type: "image" },
    { file: "files/images/CS68496_KitchenWide.jpeg", type: "image" },
    { file: "files/images/CS68497_LoosePapers.jpeg", type: "image" },
    { file: "files/images/CS68500_WindowandCurtains.jpeg", type: "image" }
  ],
  recovered: [
    { file: "files/docs/recovered%20notes/CS68476RecoveredPages.pdf", type: "pdf" },
    { file: "files/docs/recovered%20notes/CS68490_DiaryPage.pdf", type: "pdf" },
    { file: "files/docs/recovered%20notes/CS68498_Note1.pdf", type: "pdf" },
    { file: "files/docs/recovered%20notes/CS68499_Note2.pdf", type: "pdf" }
  ],
  forensics: [
    { file: "files/docs/forensics/AutopsyReport.pdf", type: "pdf" },
    { file: "files/docs/forensics/CoronersReport.pdf", type: "pdf" }
  ],
  interviews: [
    { file: "files/docs/interviews/Interview%20Colm%20Driscoll.pdf", type: "pdf" },
    { file: "files/docs/interviews/Interview%20Eileen%20Dunne.pdf", type: "pdf" },
    { file: "files/docs/interviews/Interview%20Father%20Jeremiah%20Kane.pdf", type: "pdf" },
    { file: "files/docs/interviews/Interview%20James%20O%27Sullivan.pdf", type: "pdf" },
    { file: "files/docs/interviews/Interview%20Laura%20Greene.pdf", type: "pdf" },
    { file: "files/docs/interviews/Interview%20Stacy%20Murphy.pdf", type: "pdf" },
    { file: "files/docs/interviews/Interview%20Tony%20Greene.pdf", type: "pdf" }
  ]
};

/* DOM refs */
const grid = document.getElementById('grid');
const pageTitle = document.getElementById('pageTitle');
const countInfo = document.getElementById('count');
const empty = document.getElementById('empty');
const sectionButtons = Array.from(document.querySelectorAll('#sectionList button'));
const hamb = document.getElementById('hamb');
const sidebar = document.getElementById('theSidebar');
const overlay = document.getElementById('overlay');

/* helpers */
function filenameFromPath(path){
  try { return decodeURIComponent(path.split('/').pop()); } catch(e){ return path; }
}
function clearGrid(){ grid.innerHTML=''; }

/* render */
function makeImageTile(item){
  const fn = filenameFromPath(item.file);
  const tile = document.createElement('div'); tile.className='tile';
  const a = document.createElement('a'); a.href=item.file; a.target='_blank'; a.rel='noopener';
  const img = document.createElement('img'); img.src=item.file; img.alt=fn;
  a.appendChild(img); tile.appendChild(a);
  const title = document.createElement('a'); title.className='title'; title.href=item.file; title.target='_blank'; title.rel='noopener'; title.textContent = fn;
  tile.appendChild(title);
  const m = document.createElement('div'); m.className='meta'; m.textContent='photo'; tile.appendChild(m);
  return tile;
}
function makePdfTile(item){
  const fn = filenameFromPath(item.file);
  const tile = document.createElement('div'); tile.className='tile';
  const a = document.createElement('a'); a.href=item.file; a.target='_blank'; a.rel='noopener'; a.className='file-icon';
  a.innerHTML = '<svg viewBox="0 0 24 24" aria-hidden="true" focusable="false"><path fill="currentColor" d="M6 2h7l5 5v13a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V4a2 2 0 0 1 2-2z" opacity=".12"></path><path fill="currentColor" d="M14 2v5h5"/><path fill="currentColor" d="M8 13h8v2H8v-2zm0-4h8v2H8V9z"/></svg>';
  tile.appendChild(a);
  const name = document.createElement('a'); name.className='file-name'; name.href=item.file; name.target='_blank'; name.rel='noopener'; name.textContent=fn;
  tile.appendChild(name);
  const m = document.createElement('div'); m.className='meta'; m.textContent='document'; tile.appendChild(m);
  return tile;
}

function renderSection(key){
  const items = DATA[key] || [];
  clearGrid();
  pageTitle.textContent = ({photos:'Crime Scene Photographs', recovered:'Recovered Notes', forensics:'Forensic Reports', interviews:'Interviews'})[key] || key;
  document.getElementById('count').textContent = items.length;
  if (!items.length){ empty.style.display=''; }
  else {
    empty.style.display='none';
    items.forEach(it => grid.appendChild(it.type === 'image' ? makeImageTile(it) : makePdfTile(it)));
  }
  // on mobile, hide sidebar when user selects a section so the files are immediately visible
  if (window.innerWidth <= 900) hideSidebar();
  document.getElementById('main').focus();
}

/* sidebar toggle */
function showSidebar(){ sidebar.classList.add('visible'); overlay.classList.add('show'); hamb.setAttribute('aria-expanded','true'); }
function hideSidebar(){ sidebar.classList.remove('visible'); overlay.classList.remove('show'); hamb.setAttribute('aria-expanded','false'); }
hamb.addEventListener('click', ()=> {
  if (sidebar.classList.contains('visible')) hideSidebar(); else showSidebar();
});
overlay.addEventListener('click', hideSidebar);

/* nav interactions */
function setActiveButton(btn){
  sectionButtons.forEach(b => { b.classList.toggle('active', b===btn); b.setAttribute('aria-selected', b===btn ? 'true' : 'false'); });
}
sectionButtons.forEach(btn=>{
  btn.addEventListener('click', ()=> {
    setActiveButton(btn);
    history.replaceState(null,'','#' + btn.dataset.section);
    renderSection(btn.dataset.section);
  });
});

/* init: pick hash or default photos */
(function init(){
  const hash = location.hash ? location.hash.replace('#','') : 'photos';
  const initial = sectionButtons.find(b => b.dataset.section === hash) || sectionButtons[0];
  setActiveButton(initial);
  renderSection(initial.dataset.section);
  // close sidebar if small on load
  if (window.innerWidth <= 900) hideSidebar();
  // keyboard escape closes sidebar on small screens
  document.addEventListener('keydown', (e)=> { if (e.key === 'Escape' && sidebar.classList.contains('visible')) hideSidebar(); });
})();
</script>
</body>
</html>
